<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ë¡œë˜ë²ˆí˜¸ ì¶”ì²¨ê¸° - ìë™ í…ŒìŠ¤íŠ¸</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      max-width: 900px;
      margin: 40px auto;
      padding: 20px;
      background: #f5f5f5;
    }

    h1 {
      color: #333;
      border-bottom: 3px solid #667eea;
      padding-bottom: 10px;
    }

    .test-section {
      background: white;
      padding: 20px;
      margin: 20px 0;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .test-section h2 {
      color: #667eea;
      margin-top: 0;
    }

    .result {
      padding: 15px;
      margin: 10px 0;
      border-radius: 5px;
      font-family: 'Courier New', monospace;
    }

    .pass {
      background: #d4edda;
      border-left: 4px solid #28a745;
      color: #155724;
    }

    .fail {
      background: #f8d7da;
      border-left: 4px solid #dc3545;
      color: #721c24;
    }

    .info {
      background: #d1ecf1;
      border-left: 4px solid #0c5460;
      color: #0c5460;
    }

    button {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 15px 30px;
      font-size: 16px;
      border-radius: 5px;
      cursor: pointer;
      margin: 10px 5px;
    }

    button:hover {
      opacity: 0.9;
    }

    .stats {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 10px;
      margin: 20px 0;
    }

    .stat-card {
      background: #f8f9fa;
      padding: 15px;
      border-radius: 5px;
      border-left: 4px solid #667eea;
    }

    .stat-label {
      font-size: 12px;
      color: #666;
      text-transform: uppercase;
    }

    .stat-value {
      font-size: 24px;
      font-weight: bold;
      color: #333;
    }
  </style>
</head>
<body>
  <h1>ğŸ§ª ë¡œë˜ë²ˆí˜¸ ì¶”ì²¨ê¸° - ìë™ í…ŒìŠ¤íŠ¸</h1>

  <div class="test-section">
    <h2>í…ŒìŠ¤íŠ¸ ì»¨íŠ¸ë¡¤</h2>
    <button onclick="runAllTests()">ëª¨ë“  í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
    <button onclick="clearResults()">ê²°ê³¼ ì´ˆê¸°í™”</button>
  </div>

  <div class="test-section">
    <h2>í…ŒìŠ¤íŠ¸ ê²°ê³¼</h2>
    <div id="testResults"></div>
  </div>

  <div class="test-section">
    <h2>í†µê³„</h2>
    <div class="stats" id="stats"></div>
  </div>

  <script src="js/app.js"></script>
  <script>
    let testResults = [];
    let allGeneratedNumbers = [];

    function log(message, type = 'info') {
      const resultsDiv = document.getElementById('testResults');
      const resultDiv = document.createElement('div');
      resultDiv.className = `result ${type}`;
      resultDiv.textContent = message;
      resultsDiv.appendChild(resultDiv);
      testResults.push({ message, type });
    }

    function clearResults() {
      document.getElementById('testResults').innerHTML = '';
      document.getElementById('stats').innerHTML = '';
      testResults = [];
      allGeneratedNumbers = [];
    }

    // í…ŒìŠ¤íŠ¸ìš© ë²ˆí˜¸ ìƒì„± í•¨ìˆ˜ (ì›ë³¸ í•¨ìˆ˜ ë³µì œ)
    function generateTestNumbers() {
      const numbers = Array.from({ length: 45 }, (_, i) => i + 1);
      for (let i = numbers.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [numbers[i], numbers[j]] = [numbers[j], numbers[i]];
      }
      return numbers.slice(0, 6).sort((a, b) => a - b);
    }

    // Test 1: ê¸°ë³¸ ì¶”ì²¨ ê¸°ëŠ¥
    function testBasicGeneration() {
      log('â•â•â• Test 1: ê¸°ë³¸ ì¶”ì²¨ ê¸°ëŠ¥ â•â•â•', 'info');

      const numbers = generateTestNumbers();

      // 6ê°œ ìˆ«ì ìƒì„± í™•ì¸
      if (numbers.length === 6) {
        log('âœ… PASS: 6ê°œì˜ ìˆ«ì ìƒì„±ë¨', 'pass');
      } else {
        log(`âŒ FAIL: ${numbers.length}ê°œì˜ ìˆ«ì ìƒì„±ë¨ (ì˜ˆìƒ: 6ê°œ)`, 'fail');
      }

      log(`ìƒì„±ëœ ìˆ«ì: [${numbers.join(', ')}]`, 'info');
    }

    // Test 2: ìˆ«ì ë²”ìœ„ ê²€ì¦
    function testNumberRange() {
      log('â•â•â• Test 2: ìˆ«ì ë²”ìœ„ ê²€ì¦ â•â•â•', 'info');

      let passCount = 0;
      const iterations = 100;

      for (let i = 0; i < iterations; i++) {
        const numbers = generateTestNumbers();
        const allInRange = numbers.every(n => n >= 1 && n <= 45);
        if (allInRange) passCount++;
      }

      if (passCount === iterations) {
        log(`âœ… PASS: ${iterations}íšŒ í…ŒìŠ¤íŠ¸, ëª¨ë“  ìˆ«ìê°€ 1-45 ë²”ìœ„ ë‚´`, 'pass');
      } else {
        log(`âŒ FAIL: ${passCount}/${iterations} í†µê³¼`, 'fail');
      }
    }

    // Test 3: ì¤‘ë³µ ê²€ì¦
    function testNoDuplicates() {
      log('â•â•â• Test 3: ì¤‘ë³µ ê²€ì¦ â•â•â•', 'info');

      let passCount = 0;
      const iterations = 100;

      for (let i = 0; i < iterations; i++) {
        const numbers = generateTestNumbers();
        const uniqueNumbers = new Set(numbers);
        if (uniqueNumbers.size === 6) passCount++;
      }

      if (passCount === iterations) {
        log(`âœ… PASS: ${iterations}íšŒ í…ŒìŠ¤íŠ¸, ëª¨ë‘ ì¤‘ë³µ ì—†ìŒ`, 'pass');
      } else {
        log(`âŒ FAIL: ${passCount}/${iterations} í†µê³¼`, 'fail');
      }
    }

    // Test 4: ì •ë ¬ ê²€ì¦
    function testSorting() {
      log('â•â•â• Test 4: ì •ë ¬ ê²€ì¦ â•â•â•', 'info');

      let passCount = 0;
      const iterations = 100;

      for (let i = 0; i < iterations; i++) {
        const numbers = generateTestNumbers();
        const isSorted = numbers.every((n, i, arr) => i === 0 || arr[i - 1] < n);
        if (isSorted) passCount++;
      }

      if (passCount === iterations) {
        log(`âœ… PASS: ${iterations}íšŒ í…ŒìŠ¤íŠ¸, ëª¨ë‘ ì˜¤ë¦„ì°¨ìˆœ ì •ë ¬ë¨`, 'pass');
      } else {
        log(`âŒ FAIL: ${passCount}/${iterations} í†µê³¼`, 'fail');
      }
    }

    // Test 5: ëœë¤ì„± ê²€ì¦
    function testRandomness() {
      log('â•â•â• Test 5: ëœë¤ì„± ê²€ì¦ â•â•â•', 'info');

      const iterations = 100;
      const results = [];

      for (let i = 0; i < iterations; i++) {
        const numbers = generateTestNumbers();
        results.push(numbers.join(','));
        allGeneratedNumbers.push(...numbers);
      }

      // ê³ ìœ í•œ ì¡°í•© ê°œìˆ˜
      const uniqueCombinations = new Set(results).size;
      const uniquePercentage = (uniqueCombinations / iterations * 100).toFixed(1);

      log(`ìƒì„±ëœ ì¡°í•©: ${iterations}ê°œ`, 'info');
      log(`ê³ ìœ í•œ ì¡°í•©: ${uniqueCombinations}ê°œ (${uniquePercentage}%)`, 'info');

      if (uniquePercentage >= 90) {
        log(`âœ… PASS: ëœë¤ì„± ì–‘í˜¸ (${uniquePercentage}% ê³ ìœ )`, 'pass');
      } else {
        log(`âš ï¸ WARNING: ëœë¤ì„± ë‚®ìŒ (${uniquePercentage}% ê³ ìœ )`, 'fail');
      }
    }

    // Test 6: ìˆ«ì ë¶„í¬ ë¶„ì„
    function testDistribution() {
      log('â•â•â• Test 6: ìˆ«ì ë¶„í¬ ë¶„ì„ â•â•â•', 'info');

      const iterations = 1000;
      const frequency = new Array(46).fill(0);

      for (let i = 0; i < iterations; i++) {
        const numbers = generateTestNumbers();
        numbers.forEach(n => frequency[n]++);
      }

      // í†µê³„ ê³„ì‚°
      const counts = frequency.slice(1); // 0ë²ˆ ì¸ë±ìŠ¤ ì œì™¸
      const total = counts.reduce((a, b) => a + b, 0);
      const average = total / 45;
      const variance = counts.reduce((sum, count) => sum + Math.pow(count - average, 2), 0) / 45;
      const stdDev = Math.sqrt(variance);

      log(`ì´ ì¶”ì²¨ íšŸìˆ˜: ${iterations}íšŒ (${total}ê°œ ìˆ«ì)`, 'info');
      log(`í‰ê·  ì¶œí˜„ íšŸìˆ˜: ${average.toFixed(2)}`, 'info');
      log(`í‘œì¤€í¸ì°¨: ${stdDev.toFixed(2)}`, 'info');

      // ê°€ì¥ ë§ì´/ì ê²Œ ë‚˜ì˜¨ ìˆ«ì
      const maxCount = Math.max(...counts);
      const minCount = Math.min(...counts);
      const maxNumbers = counts.map((c, i) => c === maxCount ? i + 1 : null).filter(n => n);
      const minNumbers = counts.map((c, i) => c === minCount ? i + 1 : null).filter(n => n);

      log(`ìµœë‹¤ ì¶œí˜„: ${maxNumbers.join(', ')} (${maxCount}íšŒ)`, 'info');
      log(`ìµœì†Œ ì¶œí˜„: ${minNumbers.join(', ')} (${minCount}íšŒ)`, 'info');

      // ê· ë“±ì„± ê²€ì¦ (í‘œì¤€í¸ì°¨ê°€ í‰ê· ì˜ 30% ì´ë‚´ë©´ ì–‘í˜¸)
      const threshold = average * 0.3;
      if (stdDev <= threshold) {
        log(`âœ… PASS: ë¶„í¬ê°€ ê· ë“±í•¨ (í‘œì¤€í¸ì°¨ ${stdDev.toFixed(2)} â‰¤ ${threshold.toFixed(2)})`, 'pass');
      } else {
        log(`âš ï¸ WARNING: ë¶„í¬ê°€ ë¶ˆê· ë“±í•¨ (í‘œì¤€í¸ì°¨ ${stdDev.toFixed(2)} > ${threshold.toFixed(2)})`, 'fail');
      }

      // í†µê³„ í‘œì‹œ
      displayStats(frequency);
    }

    function displayStats(frequency) {
      const statsDiv = document.getElementById('stats');

      const counts = frequency.slice(1);
      const total = counts.reduce((a, b) => a + b, 0);
      const average = total / 45;
      const max = Math.max(...counts);
      const min = Math.min(...counts);

      statsDiv.innerHTML = `
        <div class="stat-card">
          <div class="stat-label">ì´ ì¶”ì²¨ íšŸìˆ˜</div>
          <div class="stat-value">1000íšŒ</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">í‰ê·  ì¶œí˜„</div>
          <div class="stat-value">${average.toFixed(1)}íšŒ</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">ìµœëŒ€ ì¶œí˜„</div>
          <div class="stat-value">${max}íšŒ</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">ìµœì†Œ ì¶œí˜„</div>
          <div class="stat-value">${min}íšŒ</div>
        </div>
      `;
    }

    function runAllTests() {
      clearResults();
      log('ğŸš€ ìë™ í…ŒìŠ¤íŠ¸ ì‹œì‘...', 'info');
      log('', 'info');

      testBasicGeneration();
      log('', 'info');

      testNumberRange();
      log('', 'info');

      testNoDuplicates();
      log('', 'info');

      testSorting();
      log('', 'info');

      testRandomness();
      log('', 'info');

      testDistribution();
      log('', 'info');

      // ìš”ì•½
      const passCount = testResults.filter(r => r.type === 'pass').length;
      const failCount = testResults.filter(r => r.type === 'fail').length;

      log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•', 'info');
      log(`í…ŒìŠ¤íŠ¸ ì™„ë£Œ: ${passCount} í†µê³¼, ${failCount} ì‹¤íŒ¨`, passCount > failCount ? 'pass' : 'fail');
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ ì‹¤í–‰
    window.addEventListener('load', () => {
      setTimeout(runAllTests, 500);
    });
  </script>
</body>
</html>
